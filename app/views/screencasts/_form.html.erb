<%= form_for @screencast, :html => { :multiparti => true, :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :description, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :description, :class => 'text_area' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :length, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :length, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :embed, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :embed, :class => 'text_field' %>
    </div>
  </div>
	<%= f.hidden_field :company_id %>

  <div class="control-group">
    <div class="controls">
      <%= f.file_field :video %>
    </div>

	<!-- the control will appear next to this, and the video ID will be stored here after the upload -->
	  <input type="hidden" name="video[panda_video_id]" id="returned_video_id" />

	  <!-- upload progress bar (optional) -->
	  <div id="upload_progress" class="panda_upload_progress"></div>

  </div>
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                screencasts_path, :class => 'btn' %>
  </div>
<% end %>

<script>
  <% auth_params = Panda.signed_params('post', "/videos.json") %>
  jQuery("#returned_video_id").pandaUploader(<%=raw auth_params.to_json %>, {
    // Uncomment the line below if your panda account is in the EU
    // api_host: 'api-eu.pandastream.com',
    upload_progress_id: 'upload_progress'
  });
</script>
